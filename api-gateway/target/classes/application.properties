server.port=8080

# Logging
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.reactor.netty.http.client=DEBUG

# Actuator
management.endpoints.web.exposure.include=health,gateway

catalog.service.url=${CATALOG_SERVICE_URL:http://catalog-service:8081}
user-auth.service.url=${USER_AUTH_SERVICE_URL:http://user-auth-service:8082}
customer.service.url=${CUSTOMER_SERVICE_URL:http://customer-service:8085}
order.service.url=${ORDER_SERVICE_URL:http://order-service:8087}

# PUBLIC ROUTES FIRST (no auth)

spring.cloud.gateway.routes[0].id=customer-login-register
spring.cloud.gateway.routes[0].uri=${customer.service.url}
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/v1/customer/login,/api/v1/customer/register,/api/v1/customer/password/**,/api/v1/customer/*/password/**,/api/v1/customer/*/reset/**

spring.cloud.gateway.routes[1].id=catalog-public
spring.cloud.gateway.routes[1].uri=${catalog.service.url}
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/v1/products/**,/api/v1/product/**

spring.cloud.gateway.routes[2].id=catalog-public-v2
spring.cloud.gateway.routes[2].uri=${catalog.service.url}
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/v2/products/**,/api/v2/product/**

spring.cloud.gateway.routes[3].id=catalog-category-public
spring.cloud.gateway.routes[3].uri=${catalog.service.url}
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/v1/category,/api/v1/category/**

spring.cloud.gateway.routes[4].id=catalog-manufacturers-public
spring.cloud.gateway.routes[4].uri=${catalog.service.url}
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/v1/manufacturers,/api/v1/manufacturers/**,/api/v1/manufacturer/**

spring.cloud.gateway.routes[5].id=catalog-content-public
spring.cloud.gateway.routes[5].uri=${catalog.service.url}
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/v1/content/**

spring.cloud.gateway.routes[6].id=catalog-search
spring.cloud.gateway.routes[6].uri=${catalog.service.url}
spring.cloud.gateway.routes[6].predicates[0]=Path=/api/v1/search/**

spring.cloud.gateway.routes[7].id=catalog-newsletter
spring.cloud.gateway.routes[7].uri=${catalog.service.url}
spring.cloud.gateway.routes[7].predicates[0]=Path=/api/v1/newsletter,/api/v1/newsletter/**

spring.cloud.gateway.routes[8].id=catalog-contact
spring.cloud.gateway.routes[8].uri=${catalog.service.url}
spring.cloud.gateway.routes[8].predicates[0]=Path=/api/v1/contact

spring.cloud.gateway.routes[9].id=customer-reference
spring.cloud.gateway.routes[9].uri=${customer.service.url}
spring.cloud.gateway.routes[9].predicates[0]=Path=/api/v1/country,/api/v1/currency,/api/v1/languages,/api/v1/measures,/api/v1/zones

spring.cloud.gateway.routes[10].id=customer-reviews-public
spring.cloud.gateway.routes[10].uri=${customer.service.url}
spring.cloud.gateway.routes[10].predicates[0]=Path=/api/v1/customers/*/reviews

spring.cloud.gateway.routes[11].id=user-auth-stores-public
spring.cloud.gateway.routes[11].uri=${user-auth.service.url}
spring.cloud.gateway.routes[11].predicates[0]=Path=/api/v1/store,/api/v1/store/**

spring.cloud.gateway.routes[12].id=user-password-reset
spring.cloud.gateway.routes[12].uri=${user-auth.service.url}
spring.cloud.gateway.routes[12].predicates[0]=Path=/api/v1/user/**

spring.cloud.gateway.routes[13].id=user-auth-config-public
spring.cloud.gateway.routes[13].uri=${user-auth.service.url}
spring.cloud.gateway.routes[13].predicates[0]=Path=/api/v1/config

spring.cloud.gateway.routes[14].id=order-shipping-public
spring.cloud.gateway.routes[14].uri=${order.service.url}
spring.cloud.gateway.routes[14].predicates[0]=Path=/api/v1/shipping/**

spring.cloud.gateway.routes[15].id=order-payment-public
spring.cloud.gateway.routes[15].uri=${order.service.url}
spring.cloud.gateway.routes[15].predicates[0]=Path=/api/v1/payment/**,/api/v1/cart/*/payment/**

spring.cloud.gateway.routes[16].id=order-checkout-public
spring.cloud.gateway.routes[16].uri=${order.service.url}
spring.cloud.gateway.routes[16].predicates[0]=Path=/api/v1/cart/*/checkout

spring.cloud.gateway.routes[17].id=customer-cart-public
spring.cloud.gateway.routes[17].uri=${customer.service.url}
spring.cloud.gateway.routes[17].predicates[0]=Path=/api/v1/cart,/api/v1/cart/**

spring.cloud.gateway.routes[18].id=private-login
spring.cloud.gateway.routes[18].uri=${user-auth.service.url}
spring.cloud.gateway.routes[18].predicates[0]=Path=/api/v1/private/login

# AUTHENTICATED ROUTES (with JWT)

spring.cloud.gateway.routes[19].id=orders-auth
spring.cloud.gateway.routes[19].uri=${order.service.url}
spring.cloud.gateway.routes[19].predicates[0]=Path=/api/v1/auth/orders/**,/api/v1/auth/cart/**,/api/v1/private/orders/**

spring.cloud.gateway.routes[20].id=customer-auth
spring.cloud.gateway.routes[20].uri=${customer.service.url}
spring.cloud.gateway.routes[20].predicates[0]=Path=/api/v1/auth/customer/**

spring.cloud.gateway.routes[21].id=user-auth-refresh
spring.cloud.gateway.routes[21].uri=${user-auth.service.url}
spring.cloud.gateway.routes[21].predicates[0]=Path=/api/v1/auth/refresh

spring.cloud.gateway.routes[22].id=order-cache
spring.cloud.gateway.routes[22].uri=${order.service.url}
spring.cloud.gateway.routes[22].predicates[0]=Path=/api/v1/auth/cache/**

spring.cloud.gateway.routes[23].id=catalog-auth-products
spring.cloud.gateway.routes[23].uri=${catalog.service.url}
spring.cloud.gateway.routes[23].predicates[0]=Path=/api/v1/auth/products/**,/api/v1/auth/product/**

spring.cloud.gateway.routes[24].id=catalog-private
spring.cloud.gateway.routes[24].uri=${catalog.service.url}
spring.cloud.gateway.routes[24].predicates[0]=Path=/api/v1/private/product/**,/api/v2/private/product/**

spring.cloud.gateway.routes[25].id=catalog-private-products
spring.cloud.gateway.routes[25].uri=${catalog.service.url}
spring.cloud.gateway.routes[25].predicates[0]=Path=/api/v1/private/products/**

spring.cloud.gateway.routes[26].id=catalog-category-private
spring.cloud.gateway.routes[26].uri=${catalog.service.url}
spring.cloud.gateway.routes[26].predicates[0]=Path=/api/v1/private/category/**

spring.cloud.gateway.routes[27].id=catalog-manufacturer-private
spring.cloud.gateway.routes[27].uri=${catalog.service.url}
spring.cloud.gateway.routes[27].predicates[0]=Path=/api/v1/private/manufacturers/**,/api/v1/private/manufacturer/**

spring.cloud.gateway.routes[28].id=catalog-content-private
spring.cloud.gateway.routes[28].uri=${catalog.service.url}
spring.cloud.gateway.routes[28].predicates[0]=Path=/api/v1/private/content/**,/api/v1/private/file,/api/v1/private/files

spring.cloud.gateway.routes[29].id=catalog-catalog
spring.cloud.gateway.routes[29].uri=${catalog.service.url}
spring.cloud.gateway.routes[29].predicates[0]=Path=/api/v1/private/catalog,/api/v1/private/catalog/**,/api/v1/private/catalogs

spring.cloud.gateway.routes[30].id=catalog-optin
spring.cloud.gateway.routes[30].uri=${catalog.service.url}
spring.cloud.gateway.routes[30].predicates[0]=Path=/api/v1/private/optin,/api/v1/private/optin/**

spring.cloud.gateway.routes[31].id=catalog-system
spring.cloud.gateway.routes[31].uri=${catalog.service.url}
spring.cloud.gateway.routes[31].predicates[0]=Path=/api/v1/private/system/**

spring.cloud.gateway.routes[32].id=customer-private
spring.cloud.gateway.routes[32].uri=${customer.service.url}
spring.cloud.gateway.routes[32].predicates[0]=Path=/api/v1/private/customer/**,/api/v1/private/customers/**

spring.cloud.gateway.routes[33].id=order-tax
spring.cloud.gateway.routes[33].uri=${order.service.url}
spring.cloud.gateway.routes[33].predicates[0]=Path=/api/v1/private/tax/**

spring.cloud.gateway.routes[34].id=order-shipping-private
spring.cloud.gateway.routes[34].uri=${order.service.url}
spring.cloud.gateway.routes[34].predicates[0]=Path=/api/v1/private/shipping/**

spring.cloud.gateway.routes[35].id=order-payment-private
spring.cloud.gateway.routes[35].uri=${order.service.url}
spring.cloud.gateway.routes[35].predicates[0]=Path=/api/v1/private/payment/**

spring.cloud.gateway.routes[36].id=order-configurations
spring.cloud.gateway.routes[36].uri=${order.service.url}
spring.cloud.gateway.routes[36].predicates[0]=Path=/api/v1/private/configurations/**

spring.cloud.gateway.routes[37].id=order-modules
spring.cloud.gateway.routes[37].uri=${order.service.url}
spring.cloud.gateway.routes[37].predicates[0]=Path=/api/v1/private/modules/**

spring.cloud.gateway.routes[38].id=merchant-config
spring.cloud.gateway.routes[38].uri=${order.service.url}
spring.cloud.gateway.routes[38].predicates[0]=Path=/api/v1/merchant/**

spring.cloud.gateway.routes[39].id=user-auth-stores-private
spring.cloud.gateway.routes[39].uri=${user-auth.service.url}
spring.cloud.gateway.routes[39].predicates[0]=Path=/api/v1/private/store,/api/v1/private/store/**,/api/v1/private/stores,/api/v1/private/stores/**

spring.cloud.gateway.routes[40].id=user-auth-merchant
spring.cloud.gateway.routes[40].uri=${user-auth.service.url}
spring.cloud.gateway.routes[40].predicates[0]=Path=/api/v1/private/merchant/**

spring.cloud.gateway.routes[41].id=user-profile
spring.cloud.gateway.routes[41].uri=${user-auth.service.url}
spring.cloud.gateway.routes[41].predicates[0]=Path=/api/v1/private/user/**,/api/v1/private/users,/api/v1/private/users/**

spring.cloud.gateway.routes[42].id=user-auth-sec
spring.cloud.gateway.routes[42].uri=${user-auth.service.url}
spring.cloud.gateway.routes[42].predicates[0]=Path=/api/v1/sec/**

spring.cloud.gateway.routes[43].id=user-auth-marketplace
spring.cloud.gateway.routes[43].uri=${user-auth.service.url}
spring.cloud.gateway.routes[43].predicates[0]=Path=/api/v1/private/marketplace/**
