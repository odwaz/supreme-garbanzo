server.port=8080

# Logging
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.reactor.netty.http.client=DEBUG

# Actuator
management.endpoints.web.exposure.include=health,gateway

catalog.service.url=${CATALOG_SERVICE_URL:http://localhost:8081}
user-auth.service.url=${USER_AUTH_SERVICE_URL:http://localhost:8082}
customer.service.url=${CUSTOMER_SERVICE_URL:http://localhost:8085}
order.service.url=${ORDER_SERVICE_URL:http://localhost:8087}

# Catalog routes
spring.cloud.gateway.routes[0].id=catalog-public
spring.cloud.gateway.routes[0].uri=${catalog.service.url}
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/v1/products/**,/api/v1/product/**

spring.cloud.gateway.routes[1].id=catalog-private
spring.cloud.gateway.routes[1].uri=${catalog.service.url}
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/v1/private/product/**,/api/v2/private/product/**

spring.cloud.gateway.routes[2].id=catalog-category
spring.cloud.gateway.routes[2].uri=${catalog.service.url}
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/v1/category/**,/api/v1/private/category/**

spring.cloud.gateway.routes[3].id=catalog-manufacturer
spring.cloud.gateway.routes[3].uri=${catalog.service.url}
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/v1/private/manufacturers/**,/api/v1/private/manufacturer/**

spring.cloud.gateway.routes[4].id=catalog-content
spring.cloud.gateway.routes[4].uri=${catalog.service.url}
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/v1/private/content/**

# Order routes (must be before user-auth to catch /api/v1/auth/cart/**)
spring.cloud.gateway.routes[5].id=orders
spring.cloud.gateway.routes[5].uri=${order.service.url}
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/v1/auth/orders/**,/api/v1/auth/cart/**,/api/v1/private/orders/**

# Admin Auth routes
spring.cloud.gateway.routes[6].id=admin-auth
spring.cloud.gateway.routes[6].uri=${user-auth.service.url}
spring.cloud.gateway.routes[6].predicates[0]=Path=/api/auth/login

# Customer Auth routes
spring.cloud.gateway.routes[7].id=customer-auth
spring.cloud.gateway.routes[7].uri=${customer.service.url}
spring.cloud.gateway.routes[7].predicates[0]=Path=/api/v1/auth/register,/api/v1/auth/login,/api/v1/auth/customer/**

spring.cloud.gateway.routes[8].id=user-auth-stores
spring.cloud.gateway.routes[8].uri=${user-auth.service.url}
spring.cloud.gateway.routes[8].predicates[0]=Path=/api/v1/private/stores/**,/api/v1/store/**

# Customer routes
spring.cloud.gateway.routes[9].id=customer
spring.cloud.gateway.routes[9].uri=${customer.service.url}
spring.cloud.gateway.routes[9].predicates[0]=Path=/api/v1/customer/**

spring.cloud.gateway.routes[10].id=customer-cart
spring.cloud.gateway.routes[10].uri=${customer.service.url}
spring.cloud.gateway.routes[10].predicates[0]=Path=/api/v1/cart/**

spring.cloud.gateway.routes[11].id=order-tax
spring.cloud.gateway.routes[11].uri=${order.service.url}
spring.cloud.gateway.routes[11].predicates[0]=Path=/api/v1/private/tax/**

spring.cloud.gateway.routes[12].id=order-shipping
spring.cloud.gateway.routes[12].uri=${order.service.url}
spring.cloud.gateway.routes[12].predicates[0]=Path=/api/v1/private/shipping/**

spring.cloud.gateway.routes[13].id=order-payment
spring.cloud.gateway.routes[13].uri=${order.service.url}
spring.cloud.gateway.routes[13].predicates[0]=Path=/api/v1/private/payment/**
